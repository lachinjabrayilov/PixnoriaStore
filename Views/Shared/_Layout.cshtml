@using Microsoft.AspNetCore.Http
@using System.Security.Claims

@{
    // Hem Session hem Cookie ile login kontrolü:
    var userId = Context.Session.GetInt32("UserId");
    var isLoggedIn = userId != null || User.Identity.IsAuthenticated;
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - PixnoriaStore</title>
    <link rel="stylesheet" href="~/css/site.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="~/js/site.js"></script>
</head>
<body>
    <header>
        <nav style="display:flex;align-items:center;justify-content:space-between;padding:10px;">
            <ul style="list-style:none;display:flex;gap:20px;margin:0;padding:0;">
                <li><a href="/">Anasayfa</a></li>
                @if (isLoggedIn)
                {
                    <li><a href="/Order/AllOrders">Tüm Siparişlerim</a></li>
                    <li><a href="/Account/Logout">Çıkış Yap</a></li>
                }
                else
                {
                    <li><a href="/Account/Login">Giriş Yap</a></li>
                    <li><a href="/Account/Register">Üye Ol</a></li>
                }
            </ul>
            <div style="display:flex;gap:30px;align-items:center;">
                <a href="/Account/Profile" title="Profil">
                    <i class="fa fa-user" style="font-size:22px;color:#222;"></i>
                </a>
                <a href="/Favorites/MyFavorites" title="Favorilerim">
                    <i class="fa fa-heart" style="font-size:22px;color:#222;"></i>
                </a>
                <a href="/Home/sepet" title="Sepetim" style="position:relative;">
                    <i class="fa fa-shopping-cart" style="font-size:22px;color:#222;"></i>
                    <span style="position:absolute;top:-8px;right:-12px;background:#d22;color:white;border-radius:50%;font-size:13px;padding:2px 6px;">
                        <!-- Sepet ürün sayısı gösterimi eklenebilir -->
                        0
                    </span>
                </a>
            </div>
        </nav>
    </header>
    <main style="min-height:70vh;padding:20px 0;">
        @RenderBody()
    </main>
    <footer style="background:#f3f3f3;padding:16px;text-align:center;">
        © 2025 PixnoriaStore
    </footer>
</body>
</html>